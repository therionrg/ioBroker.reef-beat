{
  "version": 3,
  "sources": ["../src/reefMat.ts"],
  "sourcesContent": ["import { IoBrokerHelper } from \"./IoBrokerHelper\";\nimport { ReefBeatApi } from \"./reefBeatApi\";\nimport { IReefBeat } from \"./types\";\n\nexport class ReefMat extends ReefBeatApi {\n\tprivate readonly MAT_MIN_ROLL_DIAMETER = 50.0;\n\tprivate readonly MAT_MAX_ROLL_DIAMETERS: { [key: string]: number } = {\n\t\tmodelA: 200.0,\n\t\tmodelB: 180.0,\n\t};\n\tprivate readonly MAT_ROLL_THICKNESS = 5.0;\n\n\tconstructor(ip: string, adapter: IReefBeat, helper: IoBrokerHelper) {\n\t\tsuper(ip, false, adapter, helper);\n\n\t\t// if (!this.data.sources.some((s) => s.name === \"/configuration\")) {\n\t\t// \tthis.data.sources.push({ name: \"/configuration\", type: \"config\", data: null });\n\t\t// }\n\t\t// this.data.local = { started_roll_diameter: this.MAT_MIN_ROLL_DIAMETER };\n\t\tthis.localCapabilities.push(\"configuration\");\n\t\tthis.adapter.log.info(\"ReefMat initialized.\");\n\t}\n\n\tpublic async newRollAsync(): Promise<void> {\n\t\tconst config = await this.getDataAsync(\"/configuration\");\n\t\tconst model = config?.model || \"modelA\";\n\t\tlet diameter = 0; // this.data.local.started_roll_diameter;\n\n\t\tlet name: string;\n\t\tlet isPartial: boolean;\n\n\t\tif (diameter === this.MAT_MIN_ROLL_DIAMETER) {\n\t\t\tname = \"New Roll\";\n\t\t\tisPartial = false;\n\t\t\tdiameter = this.MAT_MAX_ROLL_DIAMETERS[model] || this.MAT_MAX_ROLL_DIAMETERS[\"modelA\"];\n\t\t} else {\n\t\t\tname = \"Started Roll\";\n\t\t\tisPartial = true;\n\t\t}\n\n\t\tconst payload = {\n\t\t\texternal_diameter: diameter,\n\t\t\tname: name,\n\t\t\tthickness: this.MAT_ROLL_THICKNESS,\n\t\t\tis_partial: isPartial,\n\t\t};\n\n\t\tconst success = await this.httpSendAsync(\"/new-roll\", payload, \"POST\");\n\t\tif (success) {\n\t\t\tthis.adapter.log.info(`ReefMat: Befehl 'New Roll' erfolgreich an ${this.ip} gesendet.`);\n\t\t} else {\n\t\t\tthis.adapter.log.error(`ReefMat: Befehl 'New Roll' fehlgeschlagen.`);\n\t\t}\n\t}\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,yBAA4B;AAGrB,MAAM,gBAAgB,+BAAY;AAAA,EACvB,wBAAwB;AAAA,EACxB,yBAAoD;AAAA,IACpE,QAAQ;AAAA,IACR,QAAQ;AAAA,EACT;AAAA,EACiB,qBAAqB;AAAA,EAEtC,YAAY,IAAY,SAAoB,QAAwB;AACnE,UAAM,IAAI,OAAO,SAAS,MAAM;AAMhC,SAAK,kBAAkB,KAAK,eAAe;AAC3C,SAAK,QAAQ,IAAI,KAAK,sBAAsB;AAAA,EAC7C;AAAA,EAEA,MAAa,eAA8B;AAC1C,UAAM,SAAS,MAAM,KAAK,aAAa,gBAAgB;AACvD,UAAM,SAAQ,iCAAQ,UAAS;AAC/B,QAAI,WAAW;AAEf,QAAI;AACJ,QAAI;AAEJ,QAAI,aAAa,KAAK,uBAAuB;AAC5C,aAAO;AACP,kBAAY;AACZ,iBAAW,KAAK,uBAAuB,KAAK,KAAK,KAAK,uBAAuB,QAAQ;AAAA,IACtF,OAAO;AACN,aAAO;AACP,kBAAY;AAAA,IACb;AAEA,UAAM,UAAU;AAAA,MACf,mBAAmB;AAAA,MACnB;AAAA,MACA,WAAW,KAAK;AAAA,MAChB,YAAY;AAAA,IACb;AAEA,UAAM,UAAU,MAAM,KAAK,cAAc,aAAa,SAAS,MAAM;AACrE,QAAI,SAAS;AACZ,WAAK,QAAQ,IAAI,KAAK,6CAA6C,KAAK,EAAE,YAAY;AAAA,IACvF,OAAO;AACN,WAAK,QAAQ,IAAI,MAAM,4CAA4C;AAAA,IACpE;AAAA,EACD;AACD;",
  "names": []
}
